<view class="page">
  <block wx:if="{{loading}}">
    <view class="loading">加载中...</view>
  </block>

  <block wx:else>
    <!-- 教练基本信息 -->
    <view class="trainer-card">
      <view class="avatar">{{trainer.avatarText}}</view>
      <view class="info">
        <text class="name">{{trainer.name}}</text>
        <text class="bio">{{trainer.bio}}</text>
        <text class="rate">¥{{trainer.rateYuan}} /小时</text>
      </view>
    </view>

    <!-- 预约须知 -->
    <view class="section">
      <text class="section-title">预约须知</text>
      <view class="notice">
        <text>• 预约需提前2小时；</text>
        <text>• 迟到超过15分钟视为取消；</text>
        <text>• 如需改期请在开始前1小时申请。</text>
      </view>
    </view>

    <!-- 预约时段 -->
    <view class="section">
      <text class="section-title">预约时段</text>
      <view class="slot-list">
        <block wx:for="{{slots}}" wx:key="id">
          <view
            class="slot-item {{selectedSlotId == item.id ? 'selected' : ''}} {{!item.selectable ? 'disabled' : ''}}"
            data-id="{{item.id}}"
            bindtap="selectSlot"
          >
            <view class="slot-left">
              <text class="time">{{item.startTime}} ~ {{item.endTime}}</text>
              <text class="remain">剩余：{{item.remain}}</text>
            </view>
            <view class="slot-right {{item.selectable ? 'ok' : 'full'}}">{{item.statusText}}</view>
          </view>
        </block>
        <block wx:if="{{slots.length == 0}}">
          <view class="empty">暂无可预约时段</view>
        </block>
      </view>
    </view>

    <!-- 底部操作 -->
    <view class="bottom-bar">
      <text class="error" wx:if="{{errorText}}">{{errorText}}</text>
      <button class="btn-go" bindtap="goCreate">去预约</button>
    </view>
  </block>
</view>