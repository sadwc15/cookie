<view class="page">
  <view class="page-title">数据统计与分析</view>

  <block wx:if="{{loading}}">
    <view class="loading">加载中...</view>
  </block>

  <block wx:else>
    <view class="grid">
      <view class="card">
        <text class="label">订单数</text>
        <text class="value">{{stats.orders}}</text>
      </view>
      <view class="card">
        <text class="label">课消</text>
        <text class="value">{{stats.classConsumption}}</text>
      </view>
      <view class="card">
        <text class="label">上座率</text>
        <text class="value">{{stats.occupancyText}}</text>
      </view>
      <view class="card">
        <text class="label">候补转正率</text>
        <text class="value">{{stats.waitlistText}}</text>
      </view>
    </view>

    <view class="chart">
      <view class="bar">
        <view class="bar-fill" style="width: {{stats.occupancyPct}}%;"></view>
      </view>
      <text class="chart-label">上座率</text>
    </view>

    <view class="chart">
      <view class="bar">
        <view class="bar-fill orange" style="width: {{stats.waitlistPct}}%;"></view>
      </view>
      <text class="chart-label">候补转正率</text>
    </view>
  </block>
</view>